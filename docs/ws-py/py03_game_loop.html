<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
    <title>Typing Tutor Game</title>
        <link href="assets/css/style.css" rel="stylesheet">
        <script src="assets/js/script.js"></script>
</head>
<body>
    <div class="navbar" id="topNav">
        <a href="https://arynchoong.com" style="padding:0;"><img src="assets/images/aryn-straight.png"></a>
        <a href="../index.html">Typing Tutor</a>
        <div class="dropdown">
        <button class="dropbtn" onclick="addResponsive()">Game &#9662;</button>
        <div class="dropdown-content">
            <a href="py01_scrape_words.html">Scrape Words</a>
            <a href="py02_pygame.html">PyGame</a>
            <a class="active">Game Loop</a>
            <a href="py04_display_text.html">Text</a>
            <a href="py05_keypress.html">Keypress</a>
            <a href="py06_game_object.html">Objects</a>
            <a href="py07_draw_playing.html">Play</a>
            <a href="py08_animate.html">Animate</a>
            <a href="py09_user_typing.html">Typing</a>
            <a href="py10_cityline.html">Cityline</a>
            <a href="py11_level_up.html">Levels</a>
            <a href="py12_sound.html">Sound</a>
        </div>
        </div>
        <a href="javascript:void(0);" class="icon" onclick="addResponsive()">&#9776;</a>
    </div>
    <div class="page">
    <article>
        <h1>Typing Tutor Game</h1>
        <h2>Game states and loops</h2>

        <p>All games work similarly in that it has states and loops. </p>
        <p>Typical game states are <i>playing</i> and <i>game over</i> states.</p>
        <p>And the game loops will be determined by the game's complexity such as levels and user game play.</p>

        <h2>Object Oriented</h2>
        <div class="flex-container"><div class="box">
        <p>Our game will become very messy code very quickly if we do not structure it. So let's refactor it to be object oriented:</p>
        </div><div class="boxes">
        <div class="code">
        <pre><span class="k">import</span> pygame
<span class="k">from</span> pygame.locals <span class="k">import</span> <span class="ow">*</span>
<div class="diff"><span class="cn">WIDTH</span> <span class="ow">=</span> <span class="nb">640</span>
<span class="cn">HEIGHT</span> <span class="ow">=</span> <span class="nb">480</span>

<span class="k">class</span> <span class="f">TypingTutor</span>():
    <span class="k">def</span> <span class="f">__init__</span>(self):
        self._running <span class="ow">=</span> <span class="k">True</span>
        self._disp_surf <span class="ow">=</span> <span class="k">None</span>
        self.size <span class="ow">=</span> self.width, self.height <span class="ow">=</span> <span class="cn">WIDTH</span>, <span class="cn">HEIGHT</span>
        
    <span class="k">def</span> <span class="f">on_init</span>(self):</div>        pygame.init()
        pygame.display.set_caption(<span class="s2">'Typing Tutor Game'</span>)<div class="diff">        self._disp_surf <span class="ow">=</span> pygame.display.set_mode(self.size)
        <span class="k">return</span> <span class="k">True</span> <span class="k">if</span> self._disp_surf <span class="k">else</span> <span class="k">False</span>

    <span class="k">def</span> <span class="f">on_execute</span>(self):
        <span class="k">if</span> <span class="k">not</span> self.on_init():
            self._running <span class="ow">=</span> <span class="k">False</span>
        <span class="k">while</span > (self._running):</div>            <span class="k">for</span> event <span class="k">in</span> pygame.event.get():
                <span class="k">if</span> event.type <span class="ow">==</span> <span class="cn">QUIT</span>:<div class="diff">                    self._running <span class="ow">=</span> <span class="k">False</span>
        self.on_cleanup()
    
    <span class="k">def</span> <span class="f">on_cleanup</span>(self):
        pygame.quit()
</div>
<span class="k">if</span> __name__<span class="ow">==</span><span class="s2">"__main__"</span>:<div class="diff">    game <span class="ow">=</span> TypingTutor()
    game.on_execute()</div></pre></div>
        </div></div>

        <h2>Game states</h2>
        <div class="flex-container"><div class="box">
        <p>Now that we have our object oriented game object. Let's add our game states, <code>START</code> <code>PLAYING</code> <code>GAMEOVER</code>. </p>
        </div><div class="boxes">
        <div class="code">
        <pre><span class="cn">START</span> <span class="ow">=</span> <span class="nb">1</span>
<span class="cn">PLAYING</span> <span class="ow">=</span> <span class="nb">2</span>
<span class="cn">GAMEOVER</span> <span class="ow">=</span> <span class="nb">3</span></pre></div>
        </div></div>

        <h2>Game loop</h2>
        <div class="flex-container"><div class="box">
        <p>With our game states, we can now set up our main game loop:</p>

        <p>We will have two loops in our game, the main game loop with the game states, and our inner play loop that we go into for each level that we will add in later.</p>

        <p>Let's add a simple main loop that does nothing for now:</p>

        </div><div class="boxes">
        <div class="code">
        <pre>
    <span class="k">def</span> <span class="f">on_execute</span>(self):
        <span class="k">if</span> <span class="k">not</span> self.on_init():
            self._running <span class="ow">=</span> <span class="k">False</span>
        <span class="c"># main game loop</span>
        <span class="k">while</span> (self._running):<div class="diff">            self.on_loop()
            self.on_render()
</div>        self.on_cleanup()
        <span class="k">return</span>

<div class="diff">    <span class="k">def</span> <span class="f">on_loop</span>(self):
        <span class="k">if</span> (self.state <span class="ow">==</span> <span class="cn">PLAYING</span>):
            <span class="c"># start game</span>
            self.on_play()
        <span class="k">return</span>

    <span class="k">def</span> <span class="f">on_render</span>(self):</div>        <span class="k">for</span> event <span class="k">in</span> pygame.event.get():
            <span class="k">if</span> event.type <span class="ow">==</span> <span class="cn">QUIT</span>:
                self._running <span class="ow">=</span> <span class="k">False</span><div class="diff">                self.state <span class="ow">=</span> <span class="cn">GAMEOVER</span>
        <span class="k">return</span>
        
    <span class="k">def</span> <span class="f">on_play</span>(self):
        pass</div></pre></div>
        </div></div>

<div class="flex-container"><div class="box">
    <p>And don't forget to initialise our <code>state</code> flag.</p>
</div><div class="boxes">
        <div class="code"><pre><span class="k">class</span> <span class="f">TypingTutor</span>():
    <span class="k">def</span> <span class="f">__init__</span>(self):<div class="diff">        self.state <span class="ow">=</span> <span class="cn">START</span></div></pre></div>
        </div></div>

    </article>
    </div>

    <div class="navbar-bottom">
        <a href="py02_pygame.html" class="nav-left">&#x2B05;</a>
        <a href="py04_display_text.html" class="nav-right">&#x27A1;</a>
    </div>
</body>
<footer>
    <p class="footer">Copyright Â© 2019 Aryn Choong. All Rights Reserved.</p>
</footer>
</html>
