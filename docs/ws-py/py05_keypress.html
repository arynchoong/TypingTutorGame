<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
    <title>Typing Tutor Game</title>
        <link href="assets/css/style.css" rel="stylesheet">
        <script src="assets/js/script.js"></script>
</head>
<body>
    <div class="navbar" id="topNav">
        <a href="https://arynchoong.com" style="padding:0;"><img src="assets/images/aryn-straight.png"></a>
        <a href="../index.html">Typing Tutor</a>
        <div class="dropdown">
        <button class="dropbtn" onclick="addResponsive()">Game &#9662;</button>
        <div class="dropdown-content">
            <a href="py01_scrape_words.html">Scrape Words</a>
            <a href="py02_pygame.html">PyGame</a>
            <a href="py03_game_loop.html">Game Loop</a>
            <a href="py04_display_text.html">Text</a>
            <a class="active">Keypress</a>
            <a href="py06_game_object.html">Objects</a>
            <a href="py07_draw_playing.html">Play</a>
            <a href="py08_animate.html">Animate</a>
            <a href="py09_user_typing.html">Typing</a>
            <a href="py10_cityline.html">Cityline</a>
            <a href="py11_level_up.html">Levels</a>
            <a href="py12_sound.html">Sound</a>
            </div>
        </div>
        <a href="javascript:void(0);" class="icon" onclick="addResponsive()">&#9776;</a>
    </div>
    
    <div class="page">
    <article>
        <h1>Typing Tutor Game</h1>
        <h2>Detecting keypress event</h2>
        <p>To progress from one game state to another, we need to get user input.</p>
        <p>We check for the <code>KEYUP</code> event. We use the <code>KEYUP</code> event instead of <code>KEYPRESS</code> event, such that we don't register more than one event for when users long press of a key.</p>

        <div class="flex-container"><div class="box">
            <p>Let's wrap our event checking loop in a function:</p>
            <p>And in addition to our checking of <code>QUIT</code> event, we check for <code>KEYUP</code> event and increment the state or reset it if it is <code>GAMEOVER</code>.</p>
        </div><div class="boxes">
            <div class="code">
<pre><div class="diff">    <span class="k">def</span> <span class="f">on_check_event</span>(self):
</div>        <span class="k">for</span> event <span class="k">in</span> pygame.event.get():
            <span class="k">if</span> event.type <span class="ow">==</span> <span class="cn">QUIT</span>:
                self._running <span class="ow">=</span> <span class="k">False</span>
                self.state <span class="ow">=</span> <span class="cn">GAMEOVER</span>
<div class="diff">            <span class="k">elif</span> event.type <span class="ow">==</span> <span class="cn">KEYUP</span>:
                <span class="k">if</span> (self.state <span class="ow">==</span> <span class="cn">GAMEOVER</span>):
                    self.state <span class="ow">=</span> <span class="cn">START</span>
                <span class="k">else</span>:
                    self.state <span class="ow">+=</span> <span class="nb">1</span>
        <span class="k">return</span></div></pre></div>
</div></div>
<br>
<div class="flex-container"><div class="box">
<p>To display the different states, lets set different texts:</p>
</div><div class="boxes">
    <div class="code">
        <pre>    <span class="k">def</span> <span class="f">on_render</span>(self):
        self._display_surf.fill(<span class="cn">BLACK</span>)
<div class="diff">        <span class="k">if</span> self.state <span class="ow">==</span> <span class="cn">START</span>:
            text <span class="ow">=</span> <span class="s2">'Typing Tutorial Game'</span>
        <span class="k">elif</span> self.state <span class="ow">==</span> <span class="cn">PLAYING</span>:
            text <span class="ow">=</span> <span class="s2">'PLAYING'</span>
        <span class="k">else</span>:
            text <span class="ow">=</span> <span class="s2">'Game Over'</span>
        self.draw_big_text(text, <span class="k">True</span>, <span class="cn">GREEN</span>, 
</div>                           (<span class="nb">int</span>(self.width/<span class="nb">2</span>), <span class="nb">int</span>(self.height/<span class="nb">2</span>)))
        pygame.display.flip()
        <span class="k">return</span></pre></div>
</div></div>
<br>
<div class="flex-container"><div class="box">
<p>Now our main game loop looks like this:</p>
</div><div class="boxes">
    <div class="code">
<pre>       <span class="c"># main game loop</span>
        <span class="k">while</span> (self._running):
            self.on_loop()
            self.on_render()
<div class="diff">            self.on_check_event()</div></pre></div>
</div></div>

<h2>Game Play</h2>

<div class="flex-container"><div class="box">
<p>Now that we have our main loop, let us create our inner game play loop, where the playing of levels happen:</p>
<p>Let's create a new script, <b>play.py</b>.</p>
<p>So that we have a class to store our game play settings and status.</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="c"># game play.py</span>
<span class="k">from</span> pygame.locals <span class="k">import</span> <span class="ow">*</span>

<span class="k">class</span> <span class="f">GamePlay</span>():
    def <span class="f">__init__</span>(self, display_surf):
        self._display_surf <span class="ow">=</span> display_surf
        
    def <span class="f">on_init</span>(self):
        <span class="k">pass</span>
    
    def <span class="f">on_execute</span>(self):
        self.on_init()</pre></div>
</div></div>
<br>
<div class="flex-container"><div class="box">
    <p>And so we can start a game by instantiating our game object.</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="c"># game.py</span>
<span class="k">import</span> pygame
<span class="k">from</span> pygame.locals <span class="k">import</span> <span class="ow">*</span>
<div class="diff"><span class="k">from</span> play <span class="k">import</span> GamePlay</div></pre>
    </div>
    <div class="code">
        <pre>    <span class="k">def</span> <span class="f">on_loop</span>(self):
        <span class="k">if</span> (self.state <span class="ow">==</span> <span class="cn">PLAYING</span>):
            <span class="c"># start game</span>
<div class="diff">            GamePlay(self._display_surf).on_execute()
</div>        <span class="k">return</span></pre></div>
</div></div>

    </article>
    </div>
    
    <div class="navbar-bottom">
        <a href="py04_display_text.html" class="nav-left">&#x2B05;</a>
        <a href="py06_game_object.html" class="nav-right">&#x27A1;</a>
    </div>
</body>
<footer>
    <p class="footer">Copyright Â© 2019 Aryn Choong. All Rights Reserved.</p>
</footer>
</html>