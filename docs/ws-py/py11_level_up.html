<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
    <title>Typing Tutor Game</title>
        <link href="assets/css/style.css" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <a href="https://arynchoong.github.io/aryn/"><img src="assets/images/aryn-straight.png"></a>
        <span class="navbar-text">Typing Tutor</span>
        <div class="dropdown">
            <button class="dropbtn" onclick="window.location.href='../index.html'">Game &#9662;</a></button>
            <div class="dropdown-content">
            <a href="py01_scrape_words.html">Scrape Words</a>
            <a href="py02_pygame.html">PyGame</a>
            <a href="py03_game_loop.html">Game Loop</a>
            <a href="py04_display_text.html">Text</a>
            <a href="py05_keypress.html">Keypress</a>
            <a href="py06_game_object.html">Objects</a>
            <a href="py07_draw_playing.html">Play</a>
            <a href="py08_animate.html">Animate</a>
            <a href="py09_user_typing.html">Typing</a>
            <a href="py10_cityline.html">Cityline</a>
            <a >Levels</a>
            <a href="">Sound</a>
            </div>
        </div>
    </div>
    <div class="page">
    <article>
        <h1>Typing Tutor Game</h1>
<h2>The Fun</h2>

<p>Now to make the game actually fun and challenging, we need to introduce some levelling up, or increased difficulty as we play.
</p>
<p>There are multitude of ways to achieve this, we can:-
<ul>
<li>increase the difficulty of words dropping. 
<li>speed up the words
</ul></p>
<h2>Level up</h2>

<div class="flex-container"><div class="box">
<p>First let's set a level object member to keep track of how man words have dropped. Levelling up every four or five words is pretty good rate:
</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="k">class</span> <span class="f">GamePlay</span>():
    <span class="k">def</span> <span class="f">__init__</span>(self, display_surf):
<div class="diff">        self.level <span class="ow">=</span> <span class="nb">1</span>
        self.typed_count <span class="ow">=</span> <span class="nb">0</span></div></pre></div>
</div></div>

<br>

<div class="flex-container"><div class="box">
<p>In our game play loop, lets check for level up:
</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="k">def</span> <span class="f">on_loop</span>(self):
<div class="diff">        <span class="k">if</span> self.typed_count <span class="ow">>=</span> <span class="nb">5</span>:
            self.level <span class="ow">+=</span> <span class="nb">1</span>
            self.typed_count <span class="ow">=</span> <span class="nb">0</span>
</div>        <span class="k">if</span> self.game_objects.move(self.ydelta):</pre></div>
</div></div>

<br>

<div class="flex-container"><div class="box">
<p>And add counter for number of typed words:
</p>
</div><div class="boxes">
    <div class="code">
<pre>    <span class="k">def</span> <span class="f">check_keyhit</span>(self):
        <span class="k">if</span> <span class="k">not</span> self.keyhit:
            <span class="k">return</span>
        <span class="k">if</span>(self.typingflag):
            <span class="k">for</span> word <span class="k">in</span> self.game_objects.game_words:
                <span class="k">if</span> word.typedidx <span class="ow">!=</span> <span class="nb">-1</span>:
                    <span class="k">if</span> word.text[word.typedidx<span class="ow">+</span><span class="nb">1</span>] <span class="ow">==</span> self.keyhit:
                        <span class="k">if</span> (word.typed() <span class="ow">==</span> <span class="k">False</span>):
                            self.typingflag <span class="ow">=</span> <span class="k">False</span>
                            self.score <span class="ow">+=</span> <span class="nb">len</span>(word)
<div class="diff">                            self.typed_count <span class="ow">+=</span> <span class="nb">1</span>
</div>                    <span class="k">else</span>:</pre></div>
</div></div>

<br>

<div class="flex-container"><div class="box">
<p>Let's now put the Level onto our status bar:</p>
<p>Also change <code>draw_score</code> to <code>draw_status</code>.</p>
</div><div class="boxes">
    <div class="code">
<pre>
    <span class="k">def</span> <span class="f">draw_status</span>(self):
        <span class="c"># draw status bar background</span>
        pygame.draw.rect(self._display_surf, <span class="cn">BLACK</span>, 
                            (<span class="nb">0</span>,<span class="nb">0</span>,self.width,<span class="nb">20</span>), <span class="nb">0</span>)
        <span class="c"># draw the score text</span>
        text <span class="ow">=</span> <span class="s2">'Score: %s'</span> <span class="ow">%</span> self.score
        self.draw_word(text, <span class="cn">YELLOW</span>, (self.width<span class="ow">-</span><span class="nb">150</span>, <span class="nb">2</span>))
<div class="diff">        text <span class="ow">=</span> <span class="s2">'Level: %s'</span> <span class="ow">%</span> self.level
        self.draw_word(text, <span class="cn">YELLOW</span>, (<span class="cn">MARGINX</span>, <span class="nb">2</span>))
</div></pre></div>
</div></div>

<h2>The words</h2>

<div class="flex-container"><div class="box">
<p>We have a large collection of words to choose from, so we want to narrow it down.
</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="c"># objects.py</span>

    <span class="k">def</span> <span class="f">add_word</span>(self):
<div class="diff">        word <span class="ow">=</span> random.choice(self.wordlist[:<span class="nb">min</span>(<span class="nb">len</span>(words_list),
                            <span class="nb">1000</span><span class="ow">*</span>level)])
</div>        <span class="c"># check that word doesn't duplicate first character in list</span>
</pre></div>
</div></div>

<h2>Speed</h2>

<div class="flex-container"><div class="box">
<p>To increase the speed, we can:-
<ul>
    <li>Increase the fps
    <li>Increase ydelta
    <li>Decrease add word timeout
</ul>
</p>
</div><div class="boxes">
    <div class="code">
<pre>    <span class="k">def</span> <span class="f">on_loop</span>(self):
        <span class="k">if</span> self.typed_count <span class="ow">>=</span> <span class="nb">6</span>:
            self.level <span class="ow">+=</span> <span class="nb">1</span>
            self.typed_count <span class="ow">=</span> <span class="nb">0</span>
            <span class="k">if</span> self.fps <span class="ow"><</span> <span class="nb">60</span>:
                self.fps <span class="ow">+=</span> <span class="nb">3</span>
            <span class="k">elif</span> self.ydelta <span class="ow"><</span> <span class="nb">3</span>:
                self.ydelta <span class="ow">+=</span><span class="nb">1</span>
            <span class="k">elif</span> self.add_timeout <span class="ow">></span> <span class="nb">900</span>:
                self.add_timeout <span class="ow">-=</span> <span class="nb">150</span></pre></div>
</div></div>

<h2>Falling on top of blocks</h2>

<div class="flex-container"><div class="box">
<p>Increase the chance that the word are placed in a spot where blocks are present. So let's edit where we choose the x coordinate of our word:
</p>
</div><div class="boxes">
    <div class="code">
<pre>
    <span class="k">def</span> <span class="f">add_word</span>(self, level):
        word <span class="ow">=</span> random.choice(self.wordlist[:<span class="nb">min</span>(<span class="nb">len</span>(words_list),
                                    <span class="nb">1000</span><span class="ow">*</span>level)])
        <span class="c"># check that word doesn't duplicate first character in list</span>

        firstchar <span class="ow">=</span> [word.text[<span class="nb">0</span>] <span class="k">for</span> word <span class="k">in</span> self.game_words]
        <span class="k">while</span> (word[<span class="nb">0</span>] <span class="k">in</span> firstchar):
            word <span class="ow">=</span> random.choice(self.wordlist)

        <span class="c"># calculate list of city blocks still standing</span>
        avail_block = []
        <span class="k">for</span> idx, block <span class="k">in</span> enumerate(self.cityline):
            <span class="k">if</span> block.get_flag() <span class="ow">==</span> <span class="k">True</span>:
                avail_block.append(idx)
        x_avail <span class="ow">=</span> random.choice(avail_block)<span class="ow">*</span><span class="nb">10</span> <span class="ow">+</span> MARGINX
        <span class="c"># calculate max x of word</span>
        max_x <span class="ow">=</span> (self.width <span class="ow">-</span> <span class="cn">MARGINX</span>) <span class="ow">-</span> (<span class="cn">FONTWIDTH</span> <span class="ow">*</span> <span class="nb">len</span>(word))
        x <span class="ow">=</span> random.randint(<span class="cn">MARGINX</span>,max_x)
        <span class="c"># randomize fun</span>
        x <span class="ow">=</span> random.choice([x_avail,x])
        x <span class="ow">=</span> <span class="nb">min</span>(x,max_x)
        
        self.game_words.append(Word(word, x))
        <span class="k">return</span> self.game_words[<span class="nb">-1</span>]
</pre></div>
</div></div>
    </article>
    </div>
</body>
<footer>
    <p class="footer">Copyright Â© 2019 Aryn Choong. All Rights Reserved.</p>
</footer>
</html>