<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
    <title>Typing Tutor Game</title>
    <link href="assets/css/style.css" rel="stylesheet">
    <script src="assets/js/script.js"></script>
</head>
<body>
    <div class="navbar" id="topNav">
        <a href="https://arynchoong.com" style="padding:0;"><img src="assets/images/aryn-straight.png"></a>
        <a href="../index.html">Typing Tutor</a>
        <div class="dropdown">
        <button class="dropbtn" onclick="addResponsive()">Game &#9662;</button>
        <div class="dropdown-content">
            <a href="py01_scrape_words.html">Scrape Words</a>
            <a href="py02_pygame.html">PyGame</a>
            <a href="py03_game_loop.html">Game Loop</a>
            <a href="py04_display_text.html">Text</a>
            <a href="py05_keypress.html">Keypress</a>
            <a href="py06_game_object.html">Objects</a>
            <a href="py07_draw_playing.html">Play</a>
            <a class="active">Animate</a>
            <a href="py09_user_typing.html">Typing</a>
            <a href="py10_cityline.html">Cityline</a>
            <a href="py11_level_up.html">Levels</a>
            <a href="py12_sound.html">Sound</a>
            </div>
        </div>
        <a href="javascript:void(0);" class="icon" onclick="addResponsive()">&#9776;</a>
    </div>

    <div class="page">
    <article>
        <h1>Typing Tutor Game</h1>
<h2>Animation</h2>

<p>The typical computer screen is constantly refreshing at about 60 hertz. And for an object that moves that, quickly, our human eye can't catch the image to recognise it.
</p>
<p>So we need to slow down our game refresh rate by using the <code>pygame.time.Clock()</code></p>

<h2>Frame rate</h2>
<div class="flex-container"><div class="box">
<p>For games, we want to control our fps (frame rate per second), which is how often we update the display:</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="k">class</span> <span class="f">GamePlay</span>():
    <span class="k">def</span> <span class="f">__init__</span>(self, display_surf):
<div class="diff">        self.fps <span class="ow">=</span> <span class="nb">25</span>
        self.fpsclock <span class="ow">=</span> pygame.time.Clock()</div></pre></div>
</div></div>

<br>
<div class="flex-container"><div class="box">
<p>And call the clock tick in our loop, to set delay:
</p>
</div><div class="boxes">
    <div class="code">
<pre>    <span class="k">def</span> <span class="f">on_execute</span>(self):
        self.on_init()
        <span class="k">while</span> (self.state <span class="ow">==</span>  <span class="cn">PLAYING</span>):
            self.on_loop()
            self.on_render()
            self.on_check_event()
<div class="diff">            self.fpsclock.tick(self.fps)
</div>        <span class="k">return</span> self.state</pre></div>
</div></div>

<h2>Move words downwards</h2>
<div class="flex-container"><div class="box">
<p>To move the words down, we just need to adjust the y coordinate of the word. So let's add move methods to all game objects:
</p>
</div><div class="boxes">
    <div class="code"><pre><span class="c"># word.py</span>
    <span class="k">def</span> <span class="f">move</span>(self, delta):
        self.y += delta</pre></div>
<div class="code"><pre><span class="c"># objects.py</span>
    <span class="k">def</span> <span class="f">move</span>(self, delta):
        <span class="k">for</span> word <span class="k">in</span> self.game_words:
            word.move(delta)</pre></div>
</div></div>

<br>
<div class="flex-container"><div class="box">
<p>And initialise a ydelta at GamePlay() and move it on game loop():
</p>
</div><div class="boxes">
    <div class="code"><pre><span class="k">class</span> <span class="f">GamePlay</span>():
    <span class="k">def</span> <span class="f">__init__</span>(self, display_surf):
<div class="diff">        self.ydelta <span class="ow">=</span> 1</pre></div>
<div class="code">
        <pre>    <span class="k">def</span> <span class="f">on_loop</span>(self):
<div class="diff">        self.game_objects.move(self.ydelta)</span>
        self.add_word()</pre></div>
</div></div>

<h2>Boundary</h2>

<p>Fairly simply, our next step is to move the words down the screen. Once we have fixed the x coordinate of the word, we just need to change the Y coordinate until it hits the bottom of the screen, which we can fixed at 40 pixels from bottom of screen. </p>
<div class="flex-container"><div class="box">
<p>Let us set this as bound_y in our objects.py :</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="k">class</span> <span class="f">Objects</span>:
    <span class="k">def</span> <span class="f">__init__</span>(self, screen_width, screen_height):
<div class="diff">        self.bound_y <span class="ow">=</span> screen_height <span class="ow">-</span> <span class="nb">40</span></div></pre></div>
</div></div>

<br>
<div class="flex-container"><div class="box">
<p>And to remove the words, once it hits the boundary. We cannot remove the words within the loop, so we have to have a way to set it for removal.</p>
<p>We will use a flag to indicate this:</p>
</div><div class="boxes">
    <div class="code">
<pre><span class="c"># word.py</span>
<span class="k">class</span> <span class="f">Word</span>:
    <span class="k">def</span> <span class="f">__init__</span>(self, word):
<div class="diff">        self.typedidx <span class="ow">=</span> <span class="nb">-1</span></div></pre></div>
</div></div>

<br>


<div class="flex-container"><div class="box">
<p>And a <code>set_remove()</code> method to set the flag:</p>
</div><div class="boxes">
    <div class="code">
<pre>    <span class="k">def</span> <span class="f">set_remove</span>(self):
        self.typedidx <span class="ow">=</span> <span class="nb">-2</span></pre></div>
</div></div>

<br>
<div class="flex-container"><div class="box">
<p>And a <code>clean_up</code> method to remove words with negative flagged <code>typed_idx</code>, in <b>objects.py</b> :</p>
</div><div class="boxes">
    <div class="code">
<pre>    <span class="k">def</span> <span class="f">cleanup</span>(self):
        <span class="k">if</span> <span class="k">not</span> self.game_words:
            <span class="k">return</span>
        <span class="c"># remove words from game_words with word.typedidx == -2</span>
        self.game_words <span class="ow">=</span> [w <span class="k">for</span> w <span class="k">in</span> self.game_words <span class="k">if</span> w.typedidx <span class="ow">!=</span> <span class="nb">-2</span>]</pre></div>
</div></div>

<br>


<div class="flex-container"><div class="box">
<p>And now we just need to add a check of the y coordinate for each word:
</p>
</div><div class="boxes">
    <div class="code">
<pre>    <span class="k">def</span> <span class="f">move</span>(self, delta):
        <span class="k">if</span> <span class="k">not</span> self.game_words:
            <span class="k">return</span>
        <span class="k">for</span> word <span class="k">in</span> self.game_words:
            word.move(delta)
            <span class="k">if</span> word.get_y() <span class="ow">>=</span> self.bound_y:
                word.set_remove()
        self.cleanup()
        <span class="k">return</span></pre></div>
</div></div>

    </article>
    </div>

    <div class="navbar-bottom">
        <a href="py07_draw_playing.html" class="nav-left">&#x2B05;</a>
        <a href="py09_user_typing.html" class="nav-right">&#x27A1;</a>
    </div>
</body>
<footer>
    <p class="footer">Copyright Â© 2019 Aryn Choong. All Rights Reserved.</p>
</footer>
</html>